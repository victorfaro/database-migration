-- First-level partitions by date (month)
CREATE TABLE app.tasks_202501 PARTITION OF app.tasks 
    FOR VALUES FROM ('2025-01-01') TO ('2025-02-01')
    PARTITION BY HASH (custom_cell_id);

CREATE TABLE app.tasks_202502 PARTITION OF app.tasks 
    FOR VALUES FROM ('2025-02-01') TO ('2025-03-01')
    PARTITION BY HASH (custom_cell_id);

CREATE TABLE app.tasks_202503 PARTITION OF app.tasks 
    FOR VALUES FROM ('2025-03-01') TO ('2025-04-01')
    PARTITION BY HASH (custom_cell_id);

CREATE TABLE app.tasks_202504 PARTITION OF app.tasks 
    FOR VALUES FROM ('2025-04-01') TO ('2025-05-01')
    PARTITION BY HASH (custom_cell_id);

CREATE TABLE app.tasks_202505 PARTITION OF app.tasks 
    FOR VALUES FROM ('2025-05-01') TO ('2025-06-01')
    PARTITION BY HASH (custom_cell_id);

-- Continue with additional month partitions as needed...

-- Create a future partition to catch dates beyond explicit definitions
CREATE TABLE app.tasks_future PARTITION OF app.tasks
    FOR VALUES FROM ('2036-01-01') TO (MAXVALUE)
    PARTITION BY HASH (custom_cell_id);



    -- For January 2025
CREATE TABLE app.tasks_202501_p0 PARTITION OF app.tasks_202501 FOR VALUES WITH (MODULUS 8, REMAINDER 0);
CREATE TABLE app.tasks_202501_p1 PARTITION OF app.tasks_202501 FOR VALUES WITH (MODULUS 8, REMAINDER 1);
CREATE TABLE app.tasks_202501_p2 PARTITION OF app.tasks_202501 FOR VALUES WITH (MODULUS 8, REMAINDER 2);
CREATE TABLE app.tasks_202501_p3 PARTITION OF app.tasks_202501 FOR VALUES WITH (MODULUS 8, REMAINDER 3);
CREATE TABLE app.tasks_202501_p4 PARTITION OF app.tasks_202501 FOR VALUES WITH (MODULUS 8, REMAINDER 4);
CREATE TABLE app.tasks_202501_p5 PARTITION OF app.tasks_202501 FOR VALUES WITH (MODULUS 8, REMAINDER 5);
CREATE TABLE app.tasks_202501_p6 PARTITION OF app.tasks_202501 FOR VALUES WITH (MODULUS 8, REMAINDER 6);
CREATE TABLE app.tasks_202501_p7 PARTITION OF app.tasks_202501 FOR VALUES WITH (MODULUS 8, REMAINDER 7);

-- For February 2025
CREATE TABLE app.tasks_202502_p0 PARTITION OF app.tasks_202502 FOR VALUES WITH (MODULUS 8, REMAINDER 0);
CREATE TABLE app.tasks_202502_p1 PARTITION OF app.tasks_202502 FOR VALUES WITH (MODULUS 8, REMAINDER 1);
CREATE TABLE app.tasks_202502_p2 PARTITION OF app.tasks_202502 FOR VALUES WITH (MODULUS 8, REMAINDER 2);
CREATE TABLE app.tasks_202502_p3 PARTITION OF app.tasks_202502 FOR VALUES WITH (MODULUS 8, REMAINDER 3);
CREATE TABLE app.tasks_202502_p4 PARTITION OF app.tasks_202502 FOR VALUES WITH (MODULUS 8, REMAINDER 4);
CREATE TABLE app.tasks_202502_p5 PARTITION OF app.tasks_202502 FOR VALUES WITH (MODULUS 8, REMAINDER 5);
CREATE TABLE app.tasks_202502_p6 PARTITION OF app.tasks_202502 FOR VALUES WITH (MODULUS 8, REMAINDER 6);
CREATE TABLE app.tasks_202502_p7 PARTITION OF app.tasks_202502 FOR VALUES WITH (MODULUS 8, REMAINDER 7);

-- Continue this pattern for each month you want to explicitly create
-- For example, for May 2025 (current month)
CREATE TABLE app.tasks_202505_p0 PARTITION OF app.tasks_202505 FOR VALUES WITH (MODULUS 8, REMAINDER 0);
CREATE TABLE app.tasks_202505_p1 PARTITION OF app.tasks_202505 FOR VALUES WITH (MODULUS 8, REMAINDER 1);
CREATE TABLE app.tasks_202505_p2 PARTITION OF app.tasks_202505 FOR VALUES WITH (MODULUS 8, REMAINDER 2);
CREATE TABLE app.tasks_202505_p3 PARTITION OF app.tasks_202505 FOR VALUES WITH (MODULUS 8, REMAINDER 3);
CREATE TABLE app.tasks_202505_p4 PARTITION OF app.tasks_202505 FOR VALUES WITH (MODULUS 8, REMAINDER 4);
CREATE TABLE app.tasks_202505_p5 PARTITION OF app.tasks_202505 FOR VALUES WITH (MODULUS 8, REMAINDER 5);
CREATE TABLE app.tasks_202505_p6 PARTITION OF app.tasks_202505 FOR VALUES WITH (MODULUS 8, REMAINDER 6);
CREATE TABLE app.tasks_202505_p7 PARTITION OF app.tasks_202505 FOR VALUES WITH (MODULUS 8, REMAINDER 7);

-- For the future partition
CREATE TABLE app.tasks_future_p0 PARTITION OF app.tasks_future FOR VALUES WITH (MODULUS 8, REMAINDER 0);
CREATE TABLE app.tasks_future_p1 PARTITION OF app.tasks_future FOR VALUES WITH (MODULUS 8, REMAINDER 1);
CREATE TABLE app.tasks_future_p2 PARTITION OF app.tasks_future FOR VALUES WITH (MODULUS 8, REMAINDER 2);
CREATE TABLE app.tasks_future_p3 PARTITION OF app.tasks_future FOR VALUES WITH (MODULUS 8, REMAINDER 3);
CREATE TABLE app.tasks_future_p4 PARTITION OF app.tasks_future FOR VALUES WITH (MODULUS 8, REMAINDER 4);
CREATE TABLE app.tasks_future_p5 PARTITION OF app.tasks_future FOR VALUES WITH (MODULUS 8, REMAINDER 5);
CREATE TABLE app.tasks_future_p6 PARTITION OF app.tasks_future FOR VALUES WITH (MODULUS 8, REMAINDER 6);
CREATE TABLE app.tasks_future_p7 PARTITION OF app.tasks_future FOR VALUES WITH (MODULUS 8, REMAINDER 7);